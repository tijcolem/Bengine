Bengine.extensibles.xmath=new function(){this.type="xmath",this.name="asciimath",this.category="text",this.upload=!1,this.accept=null;var t=this,n={blocklimit:2047},e=function(t){var n="`"+t.textContent+"`",e=t.parentNode.childNodes[0];e.innerHTML=n,MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])};this.destroy=function(){},this.fetchDependencies=function(){return[{inner:"",integrity:"",source:"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML",type:"text/javascript",wait:"MathJax"},{inner:"MathJax.Hub.Config({mml2jax:{processClass:'mathImage',ignoreClass:'xample'},asciimath2jax:{processClass:'mathImage',ignoreClass:'body'},messageStyle:'none'});",integrity:"",source:"",type:"text/x-mathjax-config"}]},this.insertContent=function(e,i){var a=document.createElement("div");a.setAttribute("class","mathImage");var o=document.createElement("div");function r(t,e){8!==e.keyCode&&t.innerText.length>n.blocklimit&&e.preventDefault()}return o.setAttribute("class","xMat"),o.contentEditable=!0,t.p.emptyObject(i)?t.d.options.defaultText&&(o.innerHTML="AsciiMath \\ Mark \\ Up: \\ \\ \\ sum_(i=1)^n i^3=((n(n+1))/2)^2"):o.innerHTML=i.content,o.addEventListener?o.addEventListener("keydown",r.bind(null,e),!1):o.attachEvent?o.attachEvent("onkeydown",r.bind(null,e)):o.onkeydown=r.bind(null,e),o.onpaste=function(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData&&(e=t.clipboardData.getData("text/plain")),!(this.innerText.length+e.length>n.blocklimit)},e.appendChild(a),e.appendChild(o),e},this.afterDOMinsert=function(t,n){e(document.getElementById(t).childNodes[1])},this.runBlock=function(t){e(document.getElementById(t).childNodes[1])},this.runData=function(t,n){return null},this.saveContent=function(t){return{content:document.getElementById(t).children[1].innerHTML}},this.showContent=function(t,n){var i=document.createElement("div");i.setAttribute("class","mathImage-show");var a=document.createElement("div");return a.setAttribute("class","xMat"),a.setAttribute("style","display:none;visibility:hidden;"),a.innerHTML=n.content,t.appendChild(i),t.appendChild(a),e(a),t},this.styleBlock=function(){return".xMat {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 100%;\n\t\t\theight: auto;\n\t\t\tborder: 1px solid black;\n\t\t\tbackground-color: white;\n\n\t\t\tpadding: 8px 6px;\n\t\t\tmargin: 0;\n\t\t\tbox-sizing: border-box;\n\n\t\t\tfont-family: Arial, Helvetica, sans-serif;\n\t\t}\n\n\t\t.mathImage, .mathImage-show {\n\t\t\tdisplay: inline-block;\n\t\t\twidth: 100%;\n\t\t\theight: auto;\n\t\t\tborder: 1px solid black;\n\t\t\tbackground-color: white;\n\t\t\t\n\t\t\ttext-align:center;\n\n\t\t\tpadding: 8px 6px;\n\t\t\tmargin: 0px;\n\t\t\tbox-sizing: border-box;\n\t\t}"}};